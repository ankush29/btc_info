{"ast":null,"code":"import _toConsumableArray from \"/Users/ankushsaini/Public/btcTransaction/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/ankushsaini/Public/btcTransaction/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ankushsaini/Public/btcTransaction/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ankushsaini/Public/btcTransaction/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ankushsaini/Public/btcTransaction/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ankushsaini/Public/btcTransaction/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/ankushsaini/Public/btcTransaction/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/ankushsaini/Public/btcTransaction/src/App.js\";\nimport React, { Component } from 'react';\nimport Loadable from 'react-loadable';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router';\nimport { Route, Switch, NavLink } from 'react-router-dom';\nimport Button from '@material-ui/core/Button';\nimport { setMessage } from './Actions/appAction';\nimport './App.scss';\nvar websocket;\nvar BtcChart = Loadable({\n  loader: function loader() {\n    return import(\n    /* webpackChunkName: \"pageDefault\" */\n    './BtcChart');\n  },\n  loading: function loading() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 16\n      },\n      __self: this\n    }, \"loading page...\");\n  },\n  modules: ['btcChart']\n});\nvar AsyncPageAnother = Loadable({\n  loader: function loader() {\n    return import(\n    /* webpackChunkName: \"pageAnother\" */\n    './PageAnother');\n  },\n  loading: function loading() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 22\n      },\n      __self: this\n    }, \"loading another page...\");\n  },\n  modules: ['pageAnother']\n});\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.componentDidMount = function () {\n      websocket = new WebSocket('wss://ws.blockchain.info/inv');\n\n      websocket.onopen = function () {\n        _this.setState({\n          connectionStatus: 'connected'\n        });\n\n        _this.start();\n      };\n\n      websocket.onerror = function () {\n        _this.stop();\n      };\n\n      websocket.onmessage = function (event) {\n        var btcData = JSON.parse(event.data);\n\n        if (btcData.op == 'utx') {\n          _this.updateBtcArray(btcData);\n        } // this.stop(event)\n        // websocket.close();\n\n      };\n    };\n\n    _this.start = function () {\n      console.log('thissss');\n      websocket.send('{\"op\":\"unconfirmed_sub\"}');\n    };\n\n    _this.stop = function (event) {\n      console.log('thissss', event); //websocket.send('{\"op\":\"unconfirmed_unsub\"}');\n\n      _this.setState({\n        connectionStatus: 'disconnected'\n      });\n    };\n\n    _this.updateBtcArray = function (btcData) {\n      var btcArray = _this.state.btcArray;\n\n      var btcArrayCopy = _toConsumableArray(btcArray);\n\n      var timeStamp = btcData.x.time;\n      var btcHash = btcData.x.hash;\n      var out = btcData.x.out;\n      var btcTotalAmount = 0;\n\n      for (var i = 0; i < out.length; i++) {\n        btcTotalAmount += out[i].value;\n      }\n\n      btcTotalAmount /= 100000000;\n      var btcObject = {\n        id: btcHash,\n        amount: btcTotalAmount,\n        timeStamp: _this.Unix_timestamp(timeStamp)\n      };\n\n      if (btcTotalAmount > 1) {\n        btcArrayCopy.push(btcObject);\n      }\n\n      if (btcArrayCopy.length > 10) {\n        btcArrayCopy.shift();\n      }\n\n      _this.setState({\n        btcArray: _toConsumableArray(btcArrayCopy)\n      });\n    };\n\n    _this.state = _this.start.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      connectionStatus: 'connecting...',\n      btcArray: []\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"Unix_timestamp\",\n    value: function Unix_timestamp(t) {\n      var dt = new Date(t * 1000);\n      var hr = dt.getHours();\n      var m = \"0\" + dt.getMinutes();\n      var s = \"0\" + dt.getSeconds();\n      return hr + ':' + m.substr(-2) + ':' + s.substr(-2);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var message = this.props.message;\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"App-intro\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, \"BTC CHART\"), React.createElement(\"nav\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        to: \"/\",\n        exact: true,\n        activeClassName: \"active\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"Home\"), React.createElement(NavLink, {\n        to: \"/searchBtc\",\n        activeClassName: \"active\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"Another page\")), React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(Route, {\n        path: \"/\",\n        exact: true,\n        component: BtcChart,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/searchBtc\",\n        component: AsyncPageAnother,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default withRouter(connect(null, null)(App));","map":{"version":3,"sources":["/Users/ankushsaini/Public/btcTransaction/src/App.js"],"names":["React","Component","Loadable","connect","withRouter","Route","Switch","NavLink","Button","setMessage","websocket","BtcChart","loader","loading","modules","AsyncPageAnother","App","props","componentDidMount","WebSocket","onopen","setState","connectionStatus","start","onerror","stop","onmessage","event","btcData","JSON","parse","data","op","updateBtcArray","console","log","send","btcArray","state","btcArrayCopy","timeStamp","x","time","btcHash","hash","out","btcTotalAmount","i","length","value","btcObject","id","amount","Unix_timestamp","push","shift","bind","t","dt","Date","hr","getHours","m","getMinutes","s","getSeconds","substr","message"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Loadable from 'react-loadable';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router';\nimport { Route, Switch, NavLink } from 'react-router-dom';\nimport Button from '@material-ui/core/Button';\n\nimport { setMessage } from './Actions/appAction';\n\nimport './App.scss';\n\nlet websocket;\n\nconst BtcChart = Loadable({\n  loader: () => import(/* webpackChunkName: \"pageDefault\" */ './BtcChart'),\n  loading: () => <div>loading page...</div>,\n  modules: ['btcChart'],\n});\n\nconst AsyncPageAnother = Loadable({\n  loader: () => import(/* webpackChunkName: \"pageAnother\" */ './PageAnother'),\n  loading: () => <div>loading another page...</div>,\n  modules: ['pageAnother'],\n});\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = this.start.bind(this)\n    this.state = {\n      connectionStatus: 'connecting...',\n      btcArray: []\n    };\n  }\n\n  componentDidMount = () => {\n    websocket = new WebSocket('wss://ws.blockchain.info/inv');\n    websocket.onopen = () => {\n      this.setState({\n        connectionStatus: 'connected'\n      })\n      this.start()\n    };\n\n    websocket.onerror = () => {\n      this.stop()\n    };\n\n    websocket.onmessage = (event) => {\n      let btcData = JSON.parse(event.data)\n      if (btcData.op == 'utx'){\n        this.updateBtcArray(btcData)\n      }\n      // this.stop(event)\n      // websocket.close();\n    }\n  }\n\n  start = () => {\n    console.log('thissss');\n    websocket.send('{\"op\":\"unconfirmed_sub\"}');\n  }\n\n  stop = (event) => {\n    console.log('thissss',event);\n    //websocket.send('{\"op\":\"unconfirmed_unsub\"}');\n    this.setState({\n      connectionStatus: 'disconnected'\n    })\n  }\n\n  updateBtcArray = (btcData) => {\n    const { btcArray } = this.state\n    let btcArrayCopy = [...btcArray]\n    let timeStamp = btcData.x.time;\n    let btcHash = btcData.x.hash;\n    let out = btcData.x.out;\n    let btcTotalAmount = 0;\n    for(let i = 0; i < out.length; i++){\n      btcTotalAmount += out[i].value;\n    }\n    btcTotalAmount /= 100000000;\n    var btcObject = { id: btcHash, amount: btcTotalAmount, timeStamp: this.Unix_timestamp(timeStamp) };\n    if(btcTotalAmount > 1) {\n      btcArrayCopy.push(btcObject);\n    }\n    if (btcArrayCopy.length > 10) {\n      btcArrayCopy.shift();\n    }\n   this.setState({\n     btcArray: [...btcArrayCopy]\n   })\n  }\n\n  Unix_timestamp (t) {\n    let dt = new Date(t*1000);\n    let hr = dt.getHours();\n    let m = \"0\" + dt.getMinutes();\n    let s = \"0\" + dt.getSeconds();\n    return hr+ ':' + m.substr(-2) + ':' + s.substr(-2);\n  }\n\n  render() {\n    const { message } = this.props;\n    return (\n      <div className=\"App\">\n        {/*<header className=\"App-header\">\n          <img src=\"./images/logo.svg\" className=\"App-logo\" alt=\"logo\" />\n          <h1 className=\"App-title\">Welcome to React</h1>\n        </header>*/}\n        <div className=\"App-intro\">\n\n          <h2>BTC CHART</h2>\n          <nav>\n            <NavLink to=\"/\" exact activeClassName=\"active\">\n              Home\n            </NavLink>\n            <NavLink to=\"/searchBtc\" activeClassName=\"active\">\n              Another page\n            </NavLink>\n          </nav>\n          <Switch>\n            <Route path=\"/\" exact component={BtcChart} />\n            <Route path=\"/searchBtc\" component={AsyncPageAnother} />\n          </Switch>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(\n  connect(\n    null,\n    null\n  )(App),\n);\n"]},"metadata":{},"sourceType":"module"}