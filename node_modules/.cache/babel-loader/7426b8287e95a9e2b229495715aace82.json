{"ast":null,"code":"import _toConsumableArray from \"/Users/ankushsaini/Public/btcTransaction/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/ankushsaini/Public/btcTransaction/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ankushsaini/Public/btcTransaction/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ankushsaini/Public/btcTransaction/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ankushsaini/Public/btcTransaction/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ankushsaini/Public/btcTransaction/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/ankushsaini/Public/btcTransaction/src/App.js\";\nimport React, { Component } from 'react';\nimport Loadable from 'react-loadable';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router';\nimport { Route, Switch, NavLink } from 'react-router-dom';\nimport { setMessage } from './Actions/appAction';\nimport './App.scss';\nvar websocket;\nvar BtcChart = Loadable({\n  loader: function loader() {\n    return import(\n    /* webpackChunkName: \"btcChart\" */\n    './BtcChart');\n  },\n  loading: function loading() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 15\n      },\n      __self: this\n    }, \"loading page...\");\n  },\n  modules: ['btcChart']\n});\nvar FindBtc = Loadable({\n  loader: function loader() {\n    return import(\n    /* webpackChunkName: \"findBtc\" */\n    './FindBtc');\n  },\n  loading: function loading() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 21\n      },\n      __self: this\n    }, \"loading another page...\");\n  },\n  modules: ['findBtc']\n});\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.componentDidMount = function () {\n      websocket = new WebSocket('wss://ws.blockchain.info/inv');\n\n      websocket.onopen = function () {\n        _this.setState({\n          connectionStatus: 'connected'\n        });\n\n        _this._start();\n      };\n\n      websocket.onerror = function () {\n        _this._stop();\n      };\n\n      websocket.onmessage = function (event) {\n        var btcData = JSON.parse(event.data);\n\n        if (btcData.op == 'utx') {\n          _this._updateBtcArray(btcData);\n        }\n      };\n    };\n\n    _this._start = function () {\n      console.log('thissss');\n      websocket.send('{\"op\":\"unconfirmed_sub\"}');\n    };\n\n    _this._stop = function (event) {\n      _this.setState({\n        connectionStatus: 'disconnected'\n      });\n    };\n\n    _this._updateBtcArray = function (btcData) {\n      var btcArray = _this.state.btcArray;\n\n      var btcArrayCopy = _toConsumableArray(btcArray);\n\n      var timeStamp = btcData.x.time;\n      var btcHash = btcData.x.hash;\n      var out = btcData.x.out;\n      var btcTotalAmount = 0;\n\n      for (var i = 0; i < out.length; i++) {\n        btcTotalAmount += out[i].value;\n      }\n\n      btcTotalAmount /= 100000000;\n      var btcObject = {\n        id: btcHash,\n        amount: btcTotalAmount,\n        timeStamp: _this._Unix_timestamp(timeStamp)\n      };\n\n      if (btcTotalAmount > 1) {\n        btcArrayCopy.push(btcObject);\n      }\n\n      if (btcArrayCopy.length > 10) {\n        btcArrayCopy.shift();\n      }\n\n      _this.setState({\n        btcArray: _toConsumableArray(btcArrayCopy)\n      });\n    };\n\n    _this.state = {\n      connectionStatus: 'connecting...',\n      btcArray: []\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"_Unix_timestamp\",\n    value: function _Unix_timestamp(t) {\n      var dt = new Date(t * 1000);\n      var hr = dt.getHours();\n      var m = \"0\" + dt.getMinutes();\n      var s = \"0\" + dt.getSeconds();\n      return hr + ':' + m.substr(-2) + ':' + s.substr(-2);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          connectionStatus = _this$state.connectionStatus,\n          btcArray = _this$state.btcArray;\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"App-intro\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(\"nav\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(NavLink, {\n        to: \"/\",\n        exact: true,\n        activeClassName: \"active\",\n        activeStyle: {\n          color: '#1569c7'\n        },\n        className: \"NavLink\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"Home\"), React.createElement(NavLink, {\n        to: \"/searchBtc\",\n        activeClassName: \"active\",\n        activeStyle: {\n          color: '#1569c7'\n        },\n        className: \"NavLink\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"FindBtc\")), React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(Route, {\n        path: \"/\",\n        exact: true,\n        render: function render(props) {\n          return React.createElement(BtcChart, Object.assign({}, props, {\n            btcArray: _this2.state.btcArray,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 111\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/searchBtc\",\n        render: function render(props) {\n          return React.createElement(FindBtc, Object.assign({}, props, {\n            btcArray: _this2.state.btcArray,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 112\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return App;\n}(Component);\n\nexport default withRouter(connect(null, null)(App));","map":{"version":3,"sources":["/Users/ankushsaini/Public/btcTransaction/src/App.js"],"names":["React","Component","Loadable","connect","withRouter","Route","Switch","NavLink","setMessage","websocket","BtcChart","loader","loading","modules","FindBtc","App","props","componentDidMount","WebSocket","onopen","setState","connectionStatus","_start","onerror","_stop","onmessage","event","btcData","JSON","parse","data","op","_updateBtcArray","console","log","send","btcArray","state","btcArrayCopy","timeStamp","x","time","btcHash","hash","out","btcTotalAmount","i","length","value","btcObject","id","amount","_Unix_timestamp","push","shift","t","dt","Date","hr","getHours","m","getMinutes","s","getSeconds","substr","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Loadable from 'react-loadable';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router';\nimport { Route, Switch, NavLink } from 'react-router-dom';\n\nimport { setMessage } from './Actions/appAction';\n\nimport './App.scss';\n\nlet websocket;\n\nconst BtcChart = Loadable({\n  loader: () => import(/* webpackChunkName: \"btcChart\" */ './BtcChart'),\n  loading: () => <div>loading page...</div>,\n  modules: ['btcChart'],\n});\n\nconst FindBtc = Loadable({\n  loader: () => import(/* webpackChunkName: \"findBtc\" */ './FindBtc'),\n  loading: () => <div>loading another page...</div>,\n  modules: ['findBtc'],\n});\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      connectionStatus: 'connecting...',\n      btcArray: []\n    };\n  }\n\n  componentDidMount = () => {\n    websocket = new WebSocket('wss://ws.blockchain.info/inv');\n    websocket.onopen = () => {\n      this.setState({\n        connectionStatus: 'connected'\n      })\n      this._start()\n    };\n\n    websocket.onerror = () => {\n      this._stop()\n    };\n\n    websocket.onmessage = (event) => {\n      let btcData = JSON.parse(event.data)\n      if (btcData.op == 'utx'){\n        this._updateBtcArray(btcData)\n      }\n    }\n  }\n\n  _start = () => {\n    console.log('thissss');\n    websocket.send('{\"op\":\"unconfirmed_sub\"}');\n  }\n\n  _stop = (event) => {\n    this.setState({\n      connectionStatus: 'disconnected'\n    })\n  }\n\n  _updateBtcArray = (btcData) => {\n    const { btcArray } = this.state\n    let btcArrayCopy = [...btcArray]\n    let timeStamp = btcData.x.time;\n    let btcHash = btcData.x.hash;\n    let out = btcData.x.out;\n    let btcTotalAmount = 0;\n    for(let i = 0; i < out.length; i++){\n      btcTotalAmount += out[i].value;\n    }\n    btcTotalAmount /= 100000000;\n    var btcObject = { id: btcHash, amount: btcTotalAmount, timeStamp: this._Unix_timestamp(timeStamp) };\n    if(btcTotalAmount > 1) {\n      btcArrayCopy.push(btcObject);\n    }\n    if (btcArrayCopy.length > 10) {\n      btcArrayCopy.shift();\n    }\n   this.setState({\n     btcArray: [...btcArrayCopy]\n   })\n  }\n\n  _Unix_timestamp (t) {\n    let dt = new Date(t*1000);\n    let hr = dt.getHours();\n    let m = \"0\" + dt.getMinutes();\n    let s = \"0\" + dt.getSeconds();\n    return hr+ ':' + m.substr(-2) + ':' + s.substr(-2);\n  }\n\n  render() {\n    const { connectionStatus, btcArray } = this.state\n    return (\n      <div className=\"App\">\n        <div className=\"App-intro\">\n          <nav>\n            <NavLink to=\"/\" exact activeClassName=\"active\" activeStyle={{ color: '#1569c7' }} className=\"NavLink\">\n              Home\n            </NavLink>\n            <NavLink to=\"/searchBtc\" activeClassName=\"active\" activeStyle={{ color: '#1569c7'}} className=\"NavLink\">\n              FindBtc\n            </NavLink>\n          </nav>\n          <Switch>\n            <Route path=\"/\" exact render={(props) => { return <BtcChart {...props} btcArray={this.state.btcArray} />}} />\n            <Route path=\"/searchBtc\" render={(props) => { return <FindBtc {...props} btcArray={this.state.btcArray} />}} />\n          </Switch>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default withRouter(\n  connect(\n    null,\n    null\n  )(App),\n);\n"]},"metadata":{},"sourceType":"module"}