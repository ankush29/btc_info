{"ast":null,"code":"import _classCallCheck from \"/Users/ankushsaini/Public/btcTransaction/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ankushsaini/Public/btcTransaction/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ankushsaini/Public/btcTransaction/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ankushsaini/Public/btcTransaction/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ankushsaini/Public/btcTransaction/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/ankushsaini/Public/btcTransaction/src/PageDefault.js\";\nimport React from 'react';\nimport sockjs from 'sockjs';\nimport Stomp from '@stomp/stompjs';\nvar socket = sockjs('wss://ws.blockchain.info/inv');\nvar ws = Stomp.over(socket);\nconsole.log('ws---', ws);\n\nvar WebSocket =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(WebSocket, _React$Component);\n\n  function WebSocket() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, WebSocket);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(WebSocket)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      ws: ws,\n      timeStamp: Date.now(),\n      maxReconnect: 1\n    };\n\n    _this.setupWebSocket = function () {\n      debugger;\n      var webSoc = _this.state.ws; // webSoc.connect({}, this.connect);\n      // webSoc.message = (body) => this.setState({ timeStamp: Date.now()});\n      // webSoc.error = (err) => {\n      //   if (this.state.maxReconnect > 0) {\n      //     this.setState({ maxReconnect: this.state.maxReconnect - 1 }, this.connect);\n      //   }\n      // };\n    };\n\n    _this.connect = function () {\n      var webSocketUrls = {};\n      debugger;\n      var channels = webSocketUrls[_this.props.name];\n\n      _this.setState({\n        maxReconnect: _this.props.maxReconnect\n      });\n\n      channels.forEach(function (channel) {\n        var webSoc = _this.state.ws;\n        webSoc.subscribe(channel.route, channel.callback); //webSoc.send(registration.route, { timeStamp: this.state.timeStamp.toString() }, 'timeStamp');\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(WebSocket, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setupWebSocket();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return WebSocket;\n}(React.Component);\n\nexport { WebSocket as default };\nWebSocket.defaultProps = {\n  name: 'something',\n  maxReconnect: 5\n};","map":{"version":3,"sources":["/Users/ankushsaini/Public/btcTransaction/src/PageDefault.js"],"names":["React","sockjs","Stomp","socket","ws","over","console","log","WebSocket","state","timeStamp","Date","now","maxReconnect","setupWebSocket","webSoc","connect","webSocketUrls","channels","props","name","setState","forEach","channel","subscribe","route","callback","Component","defaultProps"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AAEA,IAAMC,MAAM,GAAGF,MAAM,CAAC,8BAAD,CAArB;AACA,IAAMG,EAAE,GAAGF,KAAK,CAACG,IAAN,CAAWF,MAAX,CAAX;AACAG,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAoBH,EAApB;;IACqBI,S;;;;;;;;;;;;;;;;;UACnBC,K,GAAQ;AACNL,MAAAA,EAAE,EAAFA,EADM;AAENM,MAAAA,SAAS,EAAEC,IAAI,CAACC,GAAL,EAFL;AAGNC,MAAAA,YAAY,EAAC;AAHP,K;;UAQRC,c,GAAiB,YAAM;AACrB;AACA,UAAMC,MAAM,GAAG,MAAKN,KAAL,CAAWL,EAA1B,CAFqB,CAGrB;AACA;AACA;AACA;AACA;AACA;AACA;AACD,K;;UAEFY,O,GAAU,YAAM;AACd,UAAIC,aAAa,GAAG,EAApB;AACA;AACA,UAAMC,QAAQ,GAAGD,aAAa,CAAC,MAAKE,KAAL,CAAWC,IAAZ,CAA9B;;AACA,YAAKC,QAAL,CAAc;AAAER,QAAAA,YAAY,EAAE,MAAKM,KAAL,CAAWN;AAA3B,OAAd;;AACAK,MAAAA,QAAQ,CAACI,OAAT,CAAiB,UAACC,OAAD,EAAa;AAC5B,YAAMR,MAAM,GAAC,MAAKN,KAAL,CAAWL,EAAxB;AACAW,QAAAA,MAAM,CAACS,SAAP,CAAiBD,OAAO,CAACE,KAAzB,EAAgCF,OAAO,CAACG,QAAxC,EAF4B,CAG5B;AACA,OAJF;AAKA,K;;;;;;;wCAzBmB;AAClB,WAAKZ,cAAL;AACD;;;6BAwBQ;AACP,aAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACD;;;;EAlCoCd,KAAK,CAAC2B,S;;SAAxBnB,S;AAoCrBA,SAAS,CAACoB,YAAV,GAAyB;AACvBR,EAAAA,IAAI,EAAE,WADiB;AAEvBP,EAAAA,YAAY,EAAE;AAFS,CAAzB","sourcesContent":["import React from 'react';\nimport sockjs from 'sockjs';\nimport Stomp from '@stomp/stompjs';\n\nconst socket = sockjs('wss://ws.blockchain.info/inv');\nconst ws = Stomp.over(socket);\nconsole.log('ws---',ws);\nexport default class WebSocket extends React.Component {\n  state = {\n    ws,\n    timeStamp: Date.now(),\n    maxReconnect:1\n  };\n  componentDidMount() {\n    this.setupWebSocket();\n  }\n  setupWebSocket = () => {\n    debugger\n    const webSoc = this.state.ws;\n    // webSoc.connect({}, this.connect);\n    // webSoc.message = (body) => this.setState({ timeStamp: Date.now()});\n    // webSoc.error = (err) => {\n    //   if (this.state.maxReconnect > 0) {\n    //     this.setState({ maxReconnect: this.state.maxReconnect - 1 }, this.connect);\n    //   }\n    // };\n  }\n\n connect = () => {\n   let webSocketUrls = {}\n   debugger\n   const channels = webSocketUrls[this.props.name];\n   this.setState({ maxReconnect: this.props.maxReconnect });\n   channels.forEach((channel) => {\n     const webSoc=this.state.ws;\n     webSoc.subscribe(channel.route, channel.callback);\n     //webSoc.send(registration.route, { timeStamp: this.state.timeStamp.toString() }, 'timeStamp');\n    });\n  }\n  render() {\n    return <span />;\n  }\n}\nWebSocket.defaultProps = {\n  name: 'something',\n  maxReconnect: 5,\n};\n"]},"metadata":{},"sourceType":"module"}